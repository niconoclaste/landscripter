const mapImage = '/img/maps/greenmaze.gif';
const bgFullWidth = 5540;
const bgFullHeight = 2016;

let bgLeft = -4;
let bgTop = -54;

// map start center x and y position
let mapLeft = 1970;
let mapTop = 600;


// Nigel start center x and y position
let NigelTileLeftStart = 720;
let NigelTileTopStart = 1030;

let nigelOrientationX = 'right';
let nigelOrientationY = 'bottom';

if(location.hash == '#road2masanTreeLeft'){
  mapLeft = -1250;
  mapTop = 1160;

  NigelTileLeftStart = 4000;
  NigelTileTopStart = 470;
  nigelOrientationX = 'left';
  nigelOrientationY = 'bottom';
}

if(location.hash == '#road2masanTreeRight'){
  mapLeft = -1530;
  mapTop = 1160;

  NigelTileLeftStart = 4220;
  NigelTileTopStart = 470;
  nigelOrientationX = 'right';
  nigelOrientationY = 'bottom';
}

if(location.hash == '#road2masan'){
  mapLeft = -1100;
  mapTop = 900;

  NigelTileLeftStart = 3840;
  NigelTileTopStart = 720;
  nigelOrientationX = 'right';
  nigelOrientationY = 'up';
}
if(location.hash === '#greenmaze' || location.hash === ''){
  mapLeft = 920;
  mapTop = 400;



  NigelTileLeftStart = 1840;
  NigelTileTopStart = 1230;
  nigelOrientationX = 'right';
  nigelOrientationY = 'bottom';


  mapLeft = 0;
  mapTop = 0;
  NigelTileLeftStart = 2860;
  NigelTileTopStart = 1500;
  nigelOrientationX = 'left';
  nigelOrientationY = 'bottom';

}


function getScene(){
  _deco = [];
  _obstacles = [];
  _MessageZones = [];
  _MaskZones = [];
  _exitZones = [];
  gameBorders = [];

  function scene(){
    let theHash = location.hash;
    if(theHash === ''){
	return 'waterfall';
    }
    return theHash.substr(1);
  }

  if(scene() === 'waterfall'){
    gameBorders = [
      [-2, 1372],
      [576, 1082],
      [633, 1113],
      [793, 1034],
      [800, 1032],
      [738, 1002],
      [1040, 850],
      [1102, 879],
      [1084, 892],
      [1846, 1274],
      [1787, 1305],
      [1452, 1137],
      [785, 1470],
      [401, 1373],
      [758, 1554],
      [759, 1602],
      [804, 1586],
      [799, 1544],
      [874, 1513],
      [890, 1532],
      [894, 1541],
      [892, 1550],
      [886, 1564],
      [900, 1567],
      [923, 1555],
      [920, 1541],
      [911, 1526],
      [931, 1516],
      [929, 1494],
      [975, 1473],
      [998, 1484],
      [1029, 1471],
      [1040, 1483],
      [1062, 1485],
      [1080, 1480],
      [1084, 1468],
      [1074, 1454],
      [1076, 1440],
      [1437, 1259],
      [1640, 1359],
      [804, 1777]
    ];
    
    _deco = [
      // [132, 28, '/img/statusBar/sword.png', 0, 0,'fill','bloc','','','deco',false],
      [32,16,'fence',732,1016,'fill','bloc','','','deco',false]
    ];
    
    _obstacles = [
      // ['pillar',1024,1449],
      // ['pillar',864,1528],

      ['thicket',775,1144, 1],
      ['thicket',870,1075, 1],


      ['thicket',826,1545],
      ['thicket',790,1563],
      ['thicket',218,1338],
      ['thicket',250,1354],
      ['thicket',282,1370],
      ['thicket',314,1386],
      ['thicket',346,1402],
      ['thicket',378,1418],
      ['thicket',410,1434],
      ['thicket',442,1450],
      ['thicket',474,1466],
      ['thicket',506,1482],
      ['thicket',538,1498],
      ['thicket',602,1530],
      ['thicket',634,1546],
      ['thicket',666,1562],
      ['thicket',698,1578],
      ['tree',1148,1069],
      ['tree',1116,1085],
      ['tree',1084,1101],
      ['tree',1052,1117],
      ['tree',1020,1133],
      ['tree',988,1149],
      ['tree',956,1165],
      ['tree',924,1181],
      ['tree',892,1197],
      ['tree',860,1213],
      ['tree',828,1229],
      ['tree',796,1245],
      ['tree',764,1261],
      ['tree',732,1277],
      ['tree',700,1293],
      ['tree',668,1309],
      ['tree',1180,1085],
      ['tree',1212,1101],
      ['tree',1244,1117],
      ['tree',1276,1133],
      ['tree',1148,1133],
      ['tree',1084,1165],
      ['tree',1020,1197],
      ['tree',956,1229],
      ['tree',892,1261],
      ['tree',828,1293],
      ['tree',764,1325],
      ['tree',1276,1133],
      ['tree',1244,1149],
      ['tree',1212,1165],
      ['tree',1180,1181],
      ['tree',1148,1197],
      ['tree',1116,1213],
      ['tree',1084,1229],
      ['tree',1052,1245],
      ['tree',1020,1261],
      ['tree',988,1277],
      ['tree',956,1293],
      ['tree',924,1309],
      ['tree',892,1325],
      ['tree',860,1341],
      ['tree',828,1357],
      ['tree',796,1373],
      ['tree',508,1261],
      ['tree',540,1277],
      ['tree',572,1293],
      ['tree',604,1309],
      ['tree',636,1325],
      ['tree',668,1341],
      ['tree',700,1357],
      ['tree',732,1373],
      ['tree',764,1389],
      ['tree',476,1277],
      ['tree',444,1293],
      ['tree',412,1309],
      ['tree',380,1325],
      ['tree',348,1341],

      ['thicket',506,1291],
      ['thicket',538,1307],
      ['thicket',570,1323],
      ['thicket',602,1339],
      ['thicket',474,1305],
      ['thicket',506,1321],
      ['thicket',538,1337],
      ['thicket',570,1353],
      ['thicket',602,1369],
      ['thicket',634,1385],
      ['thicket',442,1321],
      ['thicket',474,1337],
      ['thicket',410,1337],

      ['tree',956,1325],
      ['tree',28,1373],
      ['tree',60,1389],
      ['tree',92,1405],

      ['thicket',699,1705],
      ['thicket',731,1721],
      ['thicket',763,1737],
      
      ['tree',1436,1310],
      ['tree',1404,1326],
      ['tree',1372,1342],
      ['tree',1340,1358],
      ['tree',1308,1374],
      ['tree',1276,1390],
      ['tree',1244,1406],
      ['tree',1212,1422],
      ['tree',1180,1438],
      ['tree',1468,1326],

      ['tree',1372,1374],

      ['tree',1212,1454],
      ['tree',1500,1342],
      ['tree',1468,1358],
      ['tree',1436,1374],
      ['tree',1404,1390],
      ['tree',1372,1406],
      ['tree',1340,1422],
      ['tree',1308,1438],
      ['tree',1276,1454],
      ['tree',1244,1470]
    ]
    
    let message0 = [
      [947, 1523],
      [929, 1512],
      [927, 1493],
      [972, 1473],
      [986, 1478],
      [1004, 1492]
    ];

    let message1 = [
      [681, 1112],
      [763, 1162],
      [828, 1121],
      [763, 1082],
    ];
    _MessageZones = [
      [message0, 'あ！入れない！\nこのゾーンはまだ作り中かな〜\nじゃあ、違うところ行こう！', false],
      // [message1, 'テストメッセージです。\t［Ｘ］キーで開いてから、\n［Ｘ］キーで閉じる。', true],
    ];
    
    let mask1 = [
      [1846, 788], 
      [1848, 1276], 
      [1788, 1310], 
      [1744, 1626], 
      [2726, 1982], 
      [3898, 1536], 
      [5702, 536], 
      [4660, -56], 
      [4152, -160], 
      [2556, 534], 
      [1818, 758], 
    ];
    _MaskZones = [
      [mask1],
    ];

    let exit1 = [
      [947, 1523],
      [929, 1512],
      [927, 1493],
      [972, 1473],
      [986, 1478],
      [1004, 1492]
    ];

    let exit2 = [
      [1841, 1274],
      [1787, 1305],
      [1761, 1291],
      [1813, 1260],
    ];

    _exitZones = [
      // [exit1, '#waterfallShrine'],
      [exit2, '#greenmaze'],
    ];
  }

  if(scene() === 'greenmaze'){
    gameBorders = [
      [1633, 1228],
      [1694, 1196],
      [1856, 1278],
      [1874, 1288],
      [1890, 1293],

      [2074, 1200],
      [2174, 1249],
      [2202, 1232],
      [2238, 1247],
      [2406, 1157],
      [2431, 1167],
      [2638, 1273],
      [2780, 1198],
      [2879, 1247],
      [3103, 1132],
      [3073, 1097],
      [3244, 1009],
      [3380, 929],
      [3314, 882],
      [3482, 790],
      [3613, 852],
      [3612, 882],
      [3642, 899],
      [3818, 807],
      [3886, 839],
      [3712, 926],
      [3857, 1002],
      [3312, 1292],
      [3485, 1377],
      [3187, 1533],
      [3116, 1605],
      [3194, 1660],
      [3014, 1757],
      [2795, 1652],
      [2604, 1550],
      [2381, 1556],
      [2328, 1576],
      [2169, 1504],
      [2359, 1415],
      [2422, 1421],
      [2487, 1449],
      [2532, 1433],
      [2595, 1464],
      [2670, 1505],

      [2740, 1470],
      [2781, 1488],
      [2832, 1464],
      // [2782, 1448],
      
      // [2990, 1496],
      [2915, 1484],
      [2948, 1472],


      [2778, 1388],
      [2683, 1439],
      [2354, 1276],
      [2221, 1339],
      [2064, 1258],
      [1880, 1351],
    ];
      
      
    _obstacles = [
      // ['tree',1978, 1200],
      // ['tree',1946, 1216],
      // ['tree',1914, 1232],
      // ['tree',1850, 1264],
      
      // ['tree',2042, 1168],
      // ['tree',2074, 1184],
      // ['tree',2106, 1200],
      // ['tree',2138, 1216],

      // ['thicket',2373,1176],

      ['tree', 2842, 1473],
      ['people1', 2744, 1616],
      ['sign', 3070, 1418],
    ];
    //32 x 16
  



    let mask1 = [
      [1767, 755],
      [1733, 1202],
      [1641, 1235],
      [1660, 1458],
      [531, 2071],
      [-371, 1258],
      [190, -383],
      [1520, -321],
      [1814, 304], 
    ];
    let mask2 = [
      [3250, 534],
      [4400, 1110],
      [5740, 480],
      [4370, -193],
      [3234, 252],
    ];
    _MaskZones = [
      [mask1],
      [mask2],
    ];

    let message1 = [
      [2750, 1622],
      [2781, 1607],
      [2830, 1626],
      [2795, 1648],
      [2750, 1626],
    ];

    let message2 = [
      [3083, 1420],
      [3060, 1435],
      [3105, 1461],
      [3145, 1437],
      [3126, 1421],
    ];

    _MessageZones = [
      [message1, '※「グフォフォーン\n　オレはもう　かんぜんに　あったまきただ\n　あいつら　ぜったい　かんべんできねえだ', true],
      // [message2, '↖︎　ＷＡＴＥＲＦＡＬＬ　ＳＨＲＩＮＥ\n　↙︎　ＶＩＬＬＡＧＥ　ＯＦ　ＧＵＭＩ\nＶＩＬＬＡＧＥ　ＯＦ　ＭＡＳＳＡＮ　↗︎', false],
      [message2, '　↖︎ ほこらの滝 \n　↙︎ グミの村　　マサンの村 ↗︎\n', false],
    ];
      
    let exit1 =[
      [1635, 1225],
      [1694, 1196],
      [1722, 1212],
      [1668, 1241],
    ];

    let exit2 =[
      [3818, 807],
      [3886, 839],
      [3849, 858],
      [3786, 824],
    ];
    
    _exitZones = [
      [exit1, '#waterfall'],
      [exit2, '#road2masan'],
    ];
  }

  if(scene().indexOf('road2masan') > -1 ){
    gameBorders = [
      [3672, 883],
      [3819, 804],
      [3507, 640],
      [3543, 598],
      [3436, 520],
      [3603, 432],
      [3584, 412],
      [3820, 290],
      [3780, 251],
      [4138, 70],
      [4180, 86],
      [4428, -42],
      [4510, 3],
      [4139, 196],
      [4165, 212],
      [4072, 258],
      [4132, 291],
      [4112, 312],
      [4561, 533],
      [4658, 478],
      [4252, 277],
      [4272, 263],
      [4251, 249],
      [4626, 55],
      [4909, 198],
      [4972, 165],
      [5034, 198],
      [4978, 229],
      [5266, 377],
      [5289, 356],
      [5461, 440],
      [5515, 471],
      [5516, 502],
      [5461, 532],
      [4784, 865],
      [4731, 837],
      [4760, 817],
      [4727, 806],
      [4878, 725],
      [4859, 706],
      [4940, 661],
      [4859, 613],
      [4874, 598],
      [4867, 586],
      [4719, 515],
      [4623, 567],
      [4737, 625],
      [4721, 647],
      [4767, 675],
      [4719, 702],
      [4721, 710],
      [4741, 725],
      [4599, 802],
      [4614, 820],
      [4562, 848],
      [4565, 857],
      [4680, 918],
      [4366, 1077],
      [3887, 837],
      [3774, 895],
      [3725, 919],
    ];

    _deco = [
      // [90,45,'',4055,460,'fill','bloc','','','deco',true],
      // [50,40,'',4020,425,'fill','bloc','','','deco',true],
      // [10,20,'',4014,468,'fill','bloc','','','deco',true],
      // [40,20,'',4024,490,'fill','bloc','','','deco',true],
    ];
    //32 / 16
    _MessageZones = [];
      
    let exit1 =[
      [3671, 882],
      [3727, 919],
      [3757, 904],
      [3698, 868],
    ];
    let exit2 =[
			[4017, 519],
			[4040, 500],
			[4134, 547],
			[4115, 575],
    ];
    let exit3 =[
      [4140, 379],
      [4162, 385],
      [4184, 397],
      [4192, 402],
      [4202, 411],
      [4209, 416],
      [4217, 425],
      [4222, 434],
      [4230, 439],
      [4238, 442],
      [4247, 452],
      [4258, 460],
      [4264, 468],
      [4265, 482],
      [4263, 490],
      [4265, 500],
      [4255, 510],
      [4249, 517],
      [4238, 517],
      [4233, 524],
      [4220, 526],
      [4210, 526],
      [4202, 533],
      [4193, 531],
      [4198, 539],
      [4194, 549],
      [4169, 553],
      [4149, 550],
      [4141, 552],
    ];

    let mask1 = [
      [3160, 561],
      [3578, 776],
      [3659, 886],
      [3760, 941],
      [3886, 906],
      [4334, 1166],
      [4363, 1467],
      [2561, 2378],
      [131, 1814],
      [-332, 764],
      [-109, -77],
      [1102, -260],
      [2481, -62],
      [3012, 226],
    ];
    _MaskZones = [
      [mask1],
    ];
    
    _exitZones = [
      [exit1, '#greenmaze'],
      [exit2, '/bigTree.html'+ parameter + '#bigTreeLeft'],
      [exit3, '/bigTree.html'+ parameter + '#bigTreeRight'],
    ];
    
  }
}

getScene();
window.addEventListener('hashchange', getScene, false);
